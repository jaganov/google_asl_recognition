# üìã –°–∏—Å—Ç–µ–º–∞ –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤ –¥–ª—è ASL –º–æ–¥–µ–ª–µ–π

–°–∏—Å—Ç–µ–º–∞ –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –∫–∞–∂–¥–æ–π –æ–±—É—á–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º –ø–æ –¥–∞—Ç–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤.

## üéØ –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏** - –∫–∞–∂–¥–∞—è –º–æ–¥–µ–ª—å –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- **–î–µ—Ç–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** - –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π** - –ª–µ–≥–∫–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã
- **–í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å** - –ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **–ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–Ω–∞–ª–∏–∑–∞ —É–ª—É—á—à–µ–Ω–∏–π

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ `models/`:

```
models/
‚îú‚îÄ‚îÄ asl_model_v20250720_080209.pth              # –ú–æ–¥–µ–ª—å
‚îú‚îÄ‚îÄ asl_model_v20250720_080209_manifest.json    # –ú–∞–Ω–∏—Ñ–µ—Å—Ç –ª—É—á—à–µ–π –º–æ–¥–µ–ª–∏
‚îî‚îÄ‚îÄ asl_model_v20250720_080209_final_manifest.json  # –§–∏–Ω–∞–ª—å–Ω—ã–π –º–∞–Ω–∏—Ñ–µ—Å—Ç
```

## üè∑Ô∏è –§–æ—Ä–º–∞—Ç –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è

- **–ü—Ä–µ—Ñ–∏–∫—Å**: `asl_model_v`
- **–î–∞—Ç–∞**: `YYYYMMDD_HHMMSS`
- **–ü—Ä–∏–º–µ—Ä**: `asl_model_v20250720_080209`

## üìÑ –¢–∏–ø—ã –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤

### 1. –ú–∞–Ω–∏—Ñ–µ—Å—Ç –ª—É—á—à–µ–π –º–æ–¥–µ–ª–∏ (`*_manifest.json`)

–°–æ–∑–¥–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª—É—á—à–∞—è –º–æ–¥–µ–ª—å –≤–æ –≤—Ä–µ–º—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏.

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–æ–¥–µ–ª–∏ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
- –¢–µ–∫—É—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (–Ω–∞ –º–æ–º–µ–Ω—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è)

### 2. –§–∏–Ω–∞–ª—å–Ω—ã–π –º–∞–Ω–∏—Ñ–µ—Å—Ç (`*_final_manifest.json`)

–°–æ–∑–¥–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ —Å –ø–æ–ª–Ω—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏.

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç:**
- –í—Ä–µ–º—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
- –ü–æ–ª–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–∞–Ω–Ω–µ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–µ

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞

```json
{
  "model_info": {
    "name": "asl_model_v20250720_080209",
    "timestamp": "20250720_080209",
    "architecture": "Enhanced_TCN_LSTM_Transformer_v2",
    "version": "adaptive_regularization_v2",
    "description": "ASL Recognition model with adaptive regularization"
  },
  "model_parameters": {
    "total_params": 1968601,
    "trainable_params": 1968601,
    "input_dim": 744,
    "hidden_dim": 192,
    "num_classes": 25,
    "max_sequence_length": 384
  },
  "training_config": {
    "epochs": 300,
    "batch_size": 32,
    "learning_rate": 0.0004,
    "optimizer": "AdamW",
    "weight_decay": 0.005,
    "loss_function": "CrossEntropyLoss",
    "label_smoothing": 0.05,
    "scheduler": "CosineAnnealingWarmRestarts"
  },
  "architecture_details": {
    "preprocessing": {
      "type": "PreprocessingLayer",
      "max_len": 384,
      "motion_features": [
        "velocity",
        "acceleration", 
        "relative_motion",
        "temporal_consistency",
        "motion_magnitude",
        "motion_direction"
      ]
    },
    "tcn_blocks": {
      "count": 3,
      "kernel_size": 17,
      "dilations": [1, 2, 4],
      "dropout_rates": [0.15, 0.2, 0.25]
    },
    "lstm": {
      "type": "BidirectionalLSTM",
      "layers": 2,
      "hidden_dim": "dim//2",
      "dropout": 0.15
    },
    "attention": {
      "type": "TemporalAttention",
      "heads": 8,
      "dropout": 0.15
    }
  },
  "augmentation": {
    "temporal_resample": {
      "probability": 0.6,
      "scale_range": [0.8, 1.2]
    },
    "random_masking": {
      "probability": 0.4,
      "ratio": 0.05
    },
    "random_affine": {
      "probability": 0.5,
      "max_scale": 0.02,
      "max_shift": 0.01,
      "max_rotate": 2
    }
  },
  "training_results": {
    "best_epoch": 150,
    "best_val_accuracy": 75.76,
    "best_train_accuracy": 85.2,
    "current_train_loss": 0.8,
    "current_val_loss": 1.2
  },
  "final_results": {
    "training_time_hours": 1.75,
    "best_val_accuracy": 75.76,
    "improvement_over_baseline": 10.76,
    "total_epochs_trained": 150,
    "early_stopping_triggered": true,
    "training_history": {
      "train_losses": [...],
      "train_accuracies": [...],
      "val_losses": [...],
      "val_accuracies": [...]
    }
  }
}
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
```bash
cd manual
python step3_prepare_train.py
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –º–æ–¥–µ–ª–∏
ls models/asl_model_v*.pth

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–∞–Ω–∏—Ñ–µ—Å—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏
cat models/asl_model_v20250720_080209_manifest.json | jq

# –°—Ä–∞–≤–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–π
cat models/*_final_manifest.json | jq '.final_results.best_val_accuracy'
```

### –ê–Ω–∞–ª–∏–∑ –∏—Å—Ç–æ—Ä–∏–∏
```bash
# –ù–∞–π—Ç–∏ –ª—É—á—à—É—é –º–æ–¥–µ–ª—å
cat models/*_final_manifest.json | jq -r '.model_info.name + ": " + (.final_results.best_val_accuracy | tostring) + "%"' | sort -k2 -nr

# –í—Ä–µ–º—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
cat models/*_final_manifest.json | jq -r '.model_info.name + ": " + (.final_results.training_time_hours | tostring) + "h"'
```

## üíª –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ —Å –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–º
```python
import torch
import json

# –ó–∞–≥—Ä—É–∂–∞–µ–º –º–æ–¥–µ–ª—å
checkpoint = torch.load('models/asl_model_v20250720_080209.pth')
model_state = checkpoint['model_state_dict']
manifest = checkpoint['manifest']

# –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
model = ASLModel(
    input_dim=manifest['model_parameters']['input_dim'],
    num_classes=manifest['model_parameters']['num_classes'],
    dim=manifest['model_parameters']['hidden_dim']
)
model.load_state_dict(model_state)

print(f"–ú–æ–¥–µ–ª—å {manifest['model_info']['name']}")
print(f"–¢–æ—á–Ω–æ—Å—Ç—å: {manifest['training_results']['best_val_accuracy']:.2f}%")
```

### –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
```python
import glob
import json

# –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≤—Å–µ –º–æ–¥–µ–ª–∏
manifests = []
for manifest_file in glob.glob('models/*_final_manifest.json'):
    with open(manifest_file, 'r') as f:
        manifests.append(json.load(f))

# –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —Ç–æ—á–Ω–æ—Å—Ç–∏
manifests.sort(key=lambda x: x['final_results']['best_val_accuracy'], reverse=True)

print("–¢–æ–ø-5 –º–æ–¥–µ–ª–µ–π:")
for i, manifest in enumerate(manifests[:5]):
    print(f"{i+1}. {manifest['model_info']['name']}: {manifest['final_results']['best_val_accuracy']:.2f}%")
```

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä
```python
def compare_architectures():
    """–°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –º–æ–¥–µ–ª–µ–π"""
    architectures = {}
    
    for manifest_file in glob.glob('models/*_final_manifest.json'):
        with open(manifest_file, 'r') as f:
            manifest = json.load(f)
            
        arch = manifest['model_info']['architecture']
        accuracy = manifest['final_results']['best_val_accuracy']
        
        if arch not in architectures:
            architectures[arch] = []
        architectures[arch].append(accuracy)
    
    print("–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä:")
    for arch, accuracies in architectures.items():
        avg_acc = sum(accuracies) / len(accuracies)
        print(f"{arch}: {avg_acc:.2f}% (—Å—Ä–µ–¥–Ω–µ–µ)")
```

## üìä –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- **best_val_accuracy** - –ª—É—á—à–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- **training_time_hours** - –≤—Ä–µ–º—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
- **total_epochs_trained** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ø–æ—Ö
- **early_stopping_triggered** - —Å—Ä–∞–±–æ—Ç–∞–ª–∞ –ª–∏ —Ä–∞–Ω–Ω—è—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–Ω–¥—ã —É–ª—É—á—à–µ–Ω–∏–π
```python
def analyze_improvements():
    """–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏"""
    manifests = []
    for manifest_file in glob.glob('models/*_final_manifest.json'):
        with open(manifest_file, 'r') as f:
            manifests.append(json.load(f))
    
    # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è
    manifests.sort(key=lambda x: x['model_info']['timestamp'])
    
    print("–ò—Å—Ç–æ—Ä–∏—è —É–ª—É—á—à–µ–Ω–∏–π:")
    for i in range(1, len(manifests)):
        prev_acc = manifests[i-1]['final_results']['best_val_accuracy']
        curr_acc = manifests[i]['final_results']['best_val_accuracy']
        improvement = curr_acc - prev_acc
        
        print(f"{manifests[i]['model_info']['name']}: +{improvement:.2f}%")
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞
```python
def create_custom_manifest(model, results, config):
    """–°–æ–∑–¥–∞–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–π –º–∞–Ω–∏—Ñ–µ—Å—Ç"""
    manifest = {
        "model_info": {
            "name": f"custom_model_{datetime.now().strftime('%Y%m%d_%H%M%S')}",
            "timestamp": datetime.now().strftime('%Y%m%d_%H%M%S'),
            "architecture": "Custom_Architecture",
            "version": "custom_v1",
            "description": "Custom model with specific configuration"
        },
        "model_parameters": {
            "total_params": sum(p.numel() for p in model.parameters()),
            "trainable_params": sum(p.numel() for p in model.parameters() if p.requires_grad),
            "input_dim": config['input_dim'],
            "hidden_dim": config['hidden_dim'],
            "num_classes": config['num_classes']
        },
        "training_config": config,
        "results": results
    }
    
    return manifest
```

## üìà –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

### –ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
```python
import matplotlib.pyplot as plt

def plot_training_progress(manifest_file):
    """–°—Ç—Ä–æ–∏—Ç –≥—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏"""
    with open(manifest_file, 'r') as f:
        manifest = json.load(f)
    
    history = manifest['final_results']['training_history']
    
    fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 5))
    
    # Loss
    ax1.plot(history['train_losses'], label='Train Loss')
    ax1.plot(history['val_losses'], label='Val Loss')
    ax1.set_title('Training and Validation Loss')
    ax1.legend()
    
    # Accuracy
    ax2.plot(history['train_accuracies'], label='Train Accuracy')
    ax2.plot(history['val_accuracies'], label='Val Accuracy')
    ax2.set_title('Training and Validation Accuracy')
    ax2.legend()
    
    plt.tight_layout()
    plt.show()
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –≤—Å–µ –¥–µ—Ç–∞–ª–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
2. **–í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å** - –º–æ–∂–Ω–æ —Ç–æ—á–Ω–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –ª—é–±–æ–π —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç
3. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ** - –ª–µ–≥–∫–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã
4. **–ê–Ω–∞–ª–∏–∑** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–µ–Ω–¥–æ–≤ –∏ —É–ª—É—á—à–µ–Ω–∏–π
5. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ** - –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [JSON Schema](https://json-schema.org/) - –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤
- [jq](https://stedolan.github.io/jq/) - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JSON –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
- [matplotlib](https://matplotlib.org/) - –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

---

**–°–∏—Å—Ç–µ–º–∞ –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤! üìã** 